<a
  class='op-merge-request--link'
  [href]="mergeRequest.htmlUrl"
  target="blank"
  [textContent]="mergeRequest.repository + '#' + mergeRequest.number"
></a>

<div
  class='op-merge-request--title'
  [textContent]="mergeRequest.title"
></div>

<div class="op-merge-request--info">
  {{ text.label_created_by }}
  <img
    *ngIf="mergeRequest._embedded.gitlabUser"
    alt='MR author avatar'
    class='op-merge-request--avatar op-avatar op-avatar_mini'
    [src]="mergeRequest._embedded.gitlabUser.avatarUrl"
  />&nbsp;
  <span class='op-merge-request--user'>
    <a
    *ngIf="mergeRequest._embedded.gitlabUser"
    [href]="mergeRequest._embedded.gitlabUser.htmlUrl"
    [textContent]="mergeRequest._embedded.gitlabUser.login"
    ></a>.
  </span>

  <span class='op-merge-request--date'>
    {{ text.label_last_updated_on }}
    <op-date-time [dateTimeValue]="mergeRequest.gitlabUpdatedAt"></op-date-time>
  </span>.
</div>

<op-gitlab-merge-request-state
  class='op-merge-request--state'
  [state]="state">
</op-gitlab-merge-request-state>

<!-- <span class='op-merge-request--state' [ngClass]="'op-merge-request--state_' + state">
  <op-icon icon-classes="button--icon icon-merge-branch"></op-icon>
  {{state}}
</span> -->

<div class="op-merge-request--labels">
  <span *ngFor="let label of mergeRequest.labels">
    <span class='op-merge-request--label' [ngStyle]="{'background-color': label.color}" >
      {{label.title}}
    </span>
  </span>
</div>

<span class="op-merge-request--pipeline-label"  *ngIf="mergeRequest._embedded.pipelines?.length">{{ text.label_pipelines }}</span>

<ul [attr.aria-label]="text.label_pipelines" class='op-merge-request--pipeline' *ngIf="mergeRequest._embedded.pipelines?.length">
  <li class='op-mr-pipeline' *ngFor="let pipeline of mergeRequest._embedded.pipelines">
    <span class='op-mr-pipeline--state-icon' [ngClass]="'op-mr-pipeline--state-icon_' + pipelineState(pipeline)">
      <op-icon icon-classes="icon-{{ pipelineStateIcon(pipeline) }}"
               [icon-title]="pipelineStateText(pipeline)"></op-icon>
    </span>

    <span class='op-mr-pipeline--info'>Merge request pipeline <a [href]="pipeline.htmlUrl">#{{ pipeline.name }}</a> {{ pipelineStateText(pipeline) }} for <a [href]="pipeline.detailsUrl">#{{ pipeline.commitId }}</a></span>

    <span class='op-mr-pipeline--avatar'><img alt='user owner avatar' [src]="pipeline.userAvatarUrl" /> {{ pipeline.username }}</span>

    <!-- <span class='op-mr-pipeline--details'>
      <a [href]="pipeline.detailsUrl">
        {{ text.label_details }}
      </a>
    </span> -->
  </li>
</ul>
